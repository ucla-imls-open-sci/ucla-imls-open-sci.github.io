---
import { Keystatic } from '@keystatic/core/ui';
import config from '../../../keystatic.config';

export const prerender = true;
---

<script>
  // Redirect handler for GitHub Pages SPA
  (function(l) {
    if (l.search) {
      var q = {};
      l.search.slice(1).split('&').forEach(function(v) {
        var a = v.split('=');
        q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
      });
      if (q.p !== undefined) {
        var p = q.p;
        delete q.p;
        var search = new URLSearchParams(q).toString();
        window.history.replaceState(null, null,
          l.pathname.slice(0, -1) + (p || '') +
          (search ? ('?' + search) : '') +
          l.hash
        );
      }
    }
  }(window.location))
</script>

<Keystatic config={config} client:only="react" />
